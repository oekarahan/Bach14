<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Katalog-App</title>


    <link rel="stylesheet" href="css/jquery.mobile-1.0b1.min.css" />
    <link href="css/index.css" rel="stylesheet" media="screen" />

    <script src="scripts/jquery-2.1.1.min.js"></script>
    <script src="scripts/jQueryMobile/jquery.mobile-1.4.5.js"></script>


    <style type="text/css">


    </style>
</head>

<body style="background-image:url(css/start.png); background-repeat: no-repeat;background-attachment:fixed;">



    <script src="cordova.js"></script>
    <script src="scripts/platformOverrides.js"></script>
    <script src="scripts/index.js"></script>

    <div class="mainContent">



        <div data-role="page" id="startseite">


            <div id="logo">
                <img id="hartmann" src="css/logo.png" />
            </div>



            <h1 id="uberschrift">
                WIR SIND DIE HELFER<br /><br />
                &nbsp; &nbsp; &nbsp;DER HELFENDEN.
            </h1>

            <div id="icon">
                <a href="#produktgruppen"><img id="klinik" src="css/start_icons/klinik.png" width="88" height="91" style="border-style: none" /></a>
                <a href="#produktgruppen"><img id="alters" src="css/start_icons/alters.png" width="88" height="91" style="margin-left:130px; margin-right: 130px; border-style: none" /></a>
                <a href="#produktgruppen"><img id="arzt" src="css/start_icons/arzt.png" width="88" height="91" style="border-style: none" /></a>

            </div>

            <img src="css/start_schrift/klinik.png" style="position:absolute; top: 510px; margin-left: 113px" />
            <img src="css/start_schrift/alters.png" style="position:absolute; top: 525px; margin-left: 300px" />
            <img src="css/start_schrift/arzt.png" style="position:absolute; top: 545px; margin-left: 538px" />


            <div id="icon1">

                <a href="#produktgruppen"><img id="apo" src="css/start_icons/apo.png" width="88" height="91" style="border-style: none" /></a>
                <a href="#produktgruppen"><img id="industrie" src="css/start_icons/industrie.png" width="88" height="91" style="margin-left:130px; margin-right: 130px; border-style: none"></a>
                <a href="#produktgruppen"><img id="private" src="css/start_icons/private.png" width="88" height="91" style="border-style: none" /></a>

            </div>


            <img src="css/start_schrift/apo.png" style="position:absolute; bottom: 230px; margin-left: 92px" />
            <img src="css/start_schrift/industrie.png" style="position:absolute; bottom: 230px; margin-left: 305px" />
            <img src="css/start_schrift/private.png" style="position:absolute; bottom: 230px; margin-left: 522px" />


        </div>

        <div data-role="page" id="produktgruppen">


            <div id="navigation">

                <div class="navii">
                    <ul>
                        <li id="zurück">
                            <a onclick="history.back()" class="azurück">
                                <img src="css/zurück.png" width="80" height="55" style="margin-right:10px; border-style: none" />
                            </a>
                        </li>

                        <li id="produkt">
                            <a href="#">
                                <img src="css/pro_weiss.png" style="margin-right: 75px; border-style: none" />
                                <span>Produkte</span>
                            </a>
                        </li>

                        <li id="leistungen">
                            <a href="leistungen.html">
                                <img src="css/leistung.png" width="50" height="50" style="margin-right: 75px; border-style: none" />
                                <span>Leistungen</span>
                            </a>
                        </li>

                        <li id="scan">
                            <a href="scanner.html">
                                <img src="css/scanner.png" width="50" height="50" style="margin-right: 50px; border-style: none " />
                                <span>Scanner</span>
                            </a>
                        </li>

                        <li id="feld1" style="width: 100px; border: 2px solid white;">
                            <input type="text" value="suche" placeholder="suche" style="width: 95px;" />
                            <img src="css/search.png" id="lupe" width="40" height="35"/>

                        </li>
                    </ul>

                </div>
            </div>
            <br /><br /><br /><br />
            <br /><br />
            <div id="produktgruppen_inhalt"></div>

        </div>


        <div data-role="page" id="subgruppen">

            <div id="navigation">

                <div class="navii">
                    <ul>
                        <li id="zurück">
                            <a onclick="history.back()" class="azurück">
                                <img src="css/zurück.png" width="80" height="55" style="margin-right:10px; border-style: none" />
                            </a>
                        </li>

                        <li id="produkt">
                            <a href="#">
                                <img src="css/pro_weiss.png" style="margin-right: 75px; border-style: none" />
                                <span>Produkte</span>
                            </a>
                        </li>

                        <li id="leistungen">
                            <a href="leistungen.html">
                                <img src="css/leistung.png" width="50" height="50" style="margin-right: 75px; border-style: none" />
                                <span>Leistungen</span>
                            </a>
                        </li>

                        <li id="scan">
                            <a href="scanner.html">
                                <img src="css/scanner.png" width="50" height="50" style="margin-right: 50px; border-style: none " />
                                <span>Scanner</span>
                            </a>
                        </li>

                        <li id="feld1">
                            <input type="text" value="suche" placeholder="suche" />
                            <img src="css/search.png" id="lupe" width="40" height="35" />

                        </li>
                    </ul>
                </div>
            </div>


            <br /><br /><br /><br />
            <br /><br />
            <div id="sub"></div>

        </div>

        <div data-role="page" id="produkte">

            <div id="navigation">

                <div class="navii">
                    <ul>
                        <li id="zurück">
                            <a onclick="history.back()" class="azurück">
                                <img src="css/zurück.png" width="80" height="55" style="margin-right:10px; border-style: none" />
                            </a>
                        </li>

                        <li id="produkt">
                            <a href="#">
                                <img src="css/pro_weiss.png" style="margin-right: 75px; border-style: none" />
                                <span>Produkte</span>
                            </a>
                        </li>

                        <li id="leistungen">
                            <a href="leistungen.html">
                                <img src="css/leistung.png" width="50" height="50" style="margin-right: 75px; border-style: none" />
                                <span>Leistungen</span>
                            </a>
                        </li>

                        <li id="scan">
                            <a href="scanner.html">
                                <img src="css/scanner.png" width="50" height="50" style="margin-right: 50px; border-style: none " />
                                <span>Scanner</span>
                            </a>
                        </li>

                        <li id="feld1">
                            <input type="text" value="suche" placeholder="suche"><input placeholder="suche" type="text"/>
                            <img src="css/search.png" id="lupe" width="40" height="35" />

                        </li>
                    </ul>

                </div>
            </div>



            <br /><br /><br /><br />
            <br /><br />
            <div id="products"></div>

        </div>


        <div data-role="page" id="ifArtikelorArtikelgruppe">

            <div id="navigation">

                <div class="navii">
                    <ul>
                        <li id="zurück">
                            <a onclick="history.back()" class="azurück">
                                <img src="css/zurück.png" width="80" height="55" style="margin-right:10px; border-style: none" />
                            </a>
                        </li>

                        <li id="produkt">
                            <a href="#">
                                <img src="css/pro_weiss.png" style="margin-right: 75px; border-style: none" />
                                <span>Produkte</span>
                            </a>
                        </li>

                        <li id="leistungen">
                            <a href="leistungen.html">
                                <img src="css/leistung.png" width="50" height="50" style="margin-right: 75px; border-style: none" />
                                <span style="margin-left: 5px">Leistungen</span>
                            </a>
                        </li>

                        <li id="scan">
                            <a href="scanner.html">
                                <img src="css/scanner.png" width="50" height="50" style="margin-right: 50px; border-style: none " />
                                <span>Scanner</span>
                            </a>
                        </li>

                        <li id="feld1">
                            <input type="text" value="suche" placeholder="suche" />
                            <img src="css/search.png" id="lupe" width="40" height="35" />

                        </li>
                    </ul>

                </div>
            </div>


                </div>
           

            <br /><br /><br /><br />
            <br /><br />
            <div id="artikelgrp"></div>


        </div>

        <div data-role="page" id="ArtikelgruppenArtikel">

            <div id="navigation">

                <div class="navii">
                    <ul>
                        <li id="zurück">
                            <a onclick="history.back()" class="azurück">
                                <img src="css/zurück.png" width="80" height="55" style="margin-right:10px; border-style: none" />
                            </a>
                        </li>

                        <li id="produkt">
                            <a href="#">
                                <img src="css/pro_weiss.png" style="margin-right: 75px; border-style: none" />
                                <span>Produkte</span>
                            </a>
                        </li>

                        <li id="leistungen">
                            <a href="leistungen.html">
                                <img src="css/leistung.png" width="50" height="50" style="margin-right: 75px; border-style: none" />
                                <span style="margin-left: 5px">Leistungen</span>
                            </a>
                        </li>

                        <li id="scan">
                            <a href="scanner.html">
                                <img src="css/scanner.png" width="50" height="50" style="margin-right: 50px; border-style: none " />
                                <span>Scanner</span>
                            </a>
                        </li>

                        <li id="feld1">
                            <input type="text" value="suche" placeholder="suche" />
                            <img src="css/search.png" id="lupe" width="40" height="35" />

                        </li>
                    </ul>

                </div>
            </div>


            <br /><br /><br /><br />
            <br /><br />
            
            <div style="background-color: white; height: 830px; margin-left: 1cm; margin-right: 2cm; overflow:scroll; padding:10px">
                
              
                <div id="artgrp"></div>


                <hr style="color:grey;" noshade size="1" width="600" align="center" />
                <div id="artgrpart"></div>

                <div id="footer" style="background-color:#cce4e6; left: 46px; width: 654px; height: 65px; position: fixed; top: 920px; ">
                <button id="mediacenter" name="button" value="Mediacenter" type="button"><span id="buttonschrift">Mediacenter</span></button>



</div>
</div>
                                           
                
 </div>

        </div>


  <!--main div-->

    <script>

        datahandler =
        {
            data: null,
            nextid: 0,

            showProductGroups: function () { //Produktgruppen

                for (index = 0; index < datahandler.data.length; index++) {

                    var div = document.createElement('div');
                    var pgname = datahandler.data[index].name;
                    div.style.styleFloat = "left";
                    //div.innerHTML = '<div style="float: left; border: 0px; "><b>' + datahandler.data[index].name + '</div><div style="clear: both"><img src="css/Probild.png"></div><div>&nbsp;</div>';
                    div.innerHTML = '<div style="float: left; "><b>' + pgname + '</div><div style="clear: both"><img src="css/Probild.png">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>';
                    var gr_fk = datahandler.data[index].gr_fk;
                    $('#produktgruppen_inhalt').append(div);
                    console.log(datahandler.data);
                    //div.onclick = function (gr_fk) { return datahandler.showSubgroups(gr_fk); }();


                    var makeShowItemEventListener = function (element) {
                        return function () {
                            datahandler.nextid = element;
                            $.mobile.pageContainer.pagecontainer("change", "#subgruppen", { test: "Hello World!" });
                        };
                    }

                    div.onclick = makeShowItemEventListener(gr_fk);

                }
            },

            showSubgroups: function (prgr_fk) { //SubGruppen

                $('#sub').html('');

                for (index = 0; index < datahandler.data.length; index++) {

                    if (datahandler.data[index].gr_fk == prgr_fk) {

                        var lange = datahandler.data[index].subGroups.length

                        for (var i = 0; i < lange; i++) {
                            var subgruppen = datahandler.data[index].subGroups[i].name;
                            var sg_fk = datahandler.data[index].subGroups[i].sg_fk;
                            var gr = datahandler.data[index].gr_fk;

                            var div = document.createElement('div');
                            //div.innerHTML = '<div  style="float: left; border: 0px;"><b>' + subgruppen + '</b></div><div style="clear: both"><img src="css/Probild.png"><div><div></div>';
                            div.style.styleFloat = "left";
                            div.innerHTML = '<div style="float: left;"><b>' + subgruppen + '</div><div style="clear: both"><img src="css/Probild.png">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>';
                            $('#sub').append(div);


                            var makeShowItemEventListener = function (element, sg_fk) {
                                return function () {
                                    var tmp = [element, sg_fk];
                                    datahandler.nextid = tmp;
                                    $.mobile.pageContainer.pagecontainer("change", "#produkte", { test: "Hello World!" });
                                };
                            }

                            div.onclick = makeShowItemEventListener(gr, sg_fk);

                        }
                    }
                }
            },

            showProducts: function (grgr) { //Produkte
                $('#products').html('');

                for (index = 0; index < datahandler.data.length; index++) {

                    if (datahandler.data[index].gr_fk == grgr[0]) {

                        var lange = datahandler.data[index].subGroups.length
                        //console.log(lange);
                        for (var i = 0; i < lange; i++) {

                            var subgruppen = datahandler.data[index].subGroups[i].name;
                            var produkte = datahandler.data[index].subGroups[i].products;
                            var prolange = datahandler.data[index].subGroups[i].products.length;

                            var sg_fk = datahandler.data[index].subGroups[i].sg_fk;
                            var gr = datahandler.data[index].gr_fk;


                            if (datahandler.data[index].subGroups[i].sg_fk == grgr[1]) {

                                for (var ii = 0; ii < prolange; ii++) {

                                    var produktename = datahandler.data[index].subGroups[i].products[ii].name;

                                    var div = document.createElement('div');
                                    // div.innerHTML = '<div  style="float: left; border: 0px; "><b>' + produktename + '</b></div><div style="clear: both"><img src="css/Probild.png"><div><div></div>';
                                    div.style.styleFloat = "left";
                                    div.innerHTML = '<div style="float: left; "><b>' + produktename + '</div><div style="clear: both"><img src="css/Probild.png">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>';
                                    $('#products').append(div);


                                    var pk = datahandler.data[index].subGroups[i].products[ii].pk;
                                   
                                    var makeShowItemEventListener = function (element, sg_fk, pk) {
                                        return function () {
                                            var tmp = [element, sg_fk, pk];
                                            datahandler.nextid = tmp;
                                            $.mobile.pageContainer.pagecontainer("change", "#ifArtikelorArtikelgruppe", { test: "Hello World!" });
                                        };
                                    }

                                    div.onclick = makeShowItemEventListener(gr, sg_fk, pk);

                                }
                            }
                        }
                    }
                }

            },


            showifArtikelorArtikelgruppe: function (grgr) // es wird überprüft ob es eine Artikelgruppe gibt
            {


                console.log(grgr[1]);
                console.log('test');

                $('#artikelgrp').html('');
                $('#artgrp').html('');

                for (index = 0; index < datahandler.data.length; index++) {

                    if (datahandler.data[index].gr_fk == grgr[0]) {

                        var lange = datahandler.data[index].subGroups.length


                        for (var i = 0; i < lange; i++) {

                            // var subgruppen = datahandler.data[index].subGroups[i].name;
                            //var produkte = datahandler.data[index].subGroups[i].products;
                            var prolange = datahandler.data[index].subGroups[i].products.length;


                            if (datahandler.data[index].subGroups[i].sg_fk == grgr[1]) {

                                for (var ii = 0; ii < prolange; ii++) {

                                    if (grgr[2] == datahandler.data[index].subGroups[i].products[ii].pk) {

                                        var dateiname = datahandler.data[index].subGroups[i].products[ii].dateiname;
                                        var produktname = datahandler.data[index].subGroups[i].products[ii].name;
                                        var charakter = datahandler.data[index].subGroups[i].products[ii].charakter_SL;
                                        var artikelgruppen = datahandler.data[index].subGroups[i].products[ii].articlegroups;
                                        

                                    }
                                
                                if (artikelgruppen == null) {
                                    
                                    // die Artikeln ohne Artikelgruppen
                                    
                                    if (grgr[2] == datahandler.data[index].subGroups[i].products[ii].pk) {

                                        var lange = datahandler.data[index].subGroups[i].products[ii].articles.length;

                                        for (ind = 0; ind < lange; ind++) {

                                            var artikel_nr = datahandler.data[index].subGroups[i].products[ii].articles[ind].artikel_nr;

                                            console.log(artikel_nr);
                                             
                                            $.mobile.pageContainer.pagecontainer("change", "#ArtikelgruppenArtikel", { test: "Hello World!" });

                                            var div = document.createElement('div');

                                            div.style.styleFloat = "left";

                                            div.innerHTML = '<div style="float: left; "><b>' + artikel_nr + '</div><div style="clear: both"></div>';
                                            $('#artgrp').append(div);


                                        }


                                    }

                                } else { // die Artikeln mt Artikelgruppen


                                  

                                    if (grgr[2] == datahandler.data[index].subGroups[i].products[ii].pk) {
                                        var aglange = datahandler.data[index].subGroups[i].products[ii].articlegroups.length;

                                        for (ind = 0; ind < aglange; ind++) {



                                            var artikelgruppe = datahandler.data[index].subGroups[i].products[ii].articlegroups[ind].name;

                                            console.log(artikelgruppe);

                                            var div = document.createElement('div');

                                            div.style.styleFloat = "left";

                                            div.innerHTML = '<div style="float: left; "><b>' + artikelgruppe + '</div><div style="clear: both"><img src="css/Probild.png">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>';
                                            $('#artikelgrp').append(div);

                                            var argr_fk = datahandler.data[index].subGroups[i].products[ii].articlegroups[ind].argr_fk;
                                            var sg_fk = datahandler.data[index].subGroups[i].sg_fk;
                                            var gr = datahandler.data[index].gr_fk;
                                            var pk = datahandler.data[index].subGroups[i].products[ii].pk;

                                            var makeShowItemEventListener = function (element, sg_fk, pk, argr_fk) {
                                                return function () {
                                                    var tmp = [element, sg_fk, pk, argr_fk];
                                                    datahandler.nextid = tmp;
                                                    $.mobile.pageContainer.pagecontainer("change", "#ArtikelgruppenArtikel", { test: "Hello World!" });
                                                };
                                            }

                                            div.onclick = makeShowItemEventListener(gr, sg_fk, pk, argr_fk);

                                        }
                                    }
                                }
    
                            }
                        }
                    }}
                }
            },


            showArtikelgruppenArtikel: function (grgr) {

 
                $('#artgrpart').html('');
                $('#artgrp').html('');

                for (index = 0; index < datahandler.data.length; index++) {

                    if (datahandler.data[index].gr_fk == grgr[0]) {

                        var sublange = datahandler.data[index].subGroups.length


                        for (var i = 0; i < sublange; i++) {

                            var subgruppen = datahandler.data[index].subGroups[i].name;
                            var produkte = datahandler.data[index].subGroups[i].products;
                            var sg_fk = datahandler.data[index].subGroups[i].sg_fk;
                           


                            if (sg_fk == grgr[1]) {

                                var prolange = datahandler.data[index].subGroups[i].products.length;

                                for (var ii = 0; ii < prolange; ii++) {

                                    if (grgr[2] == datahandler.data[index].subGroups[i].products[ii].pk) {

                                        var dateiname = datahandler.data[index].subGroups[i].products[ii].dateiname;
                                        var produktname = datahandler.data[index].subGroups[i].products[ii].name;
                                        var charakter = datahandler.data[index].subGroups[i].products[ii].charakter_SL;
                                        var artikelgruppen = datahandler.data[index].subGroups[i].products[ii].articlegroups;


                                    }
                                    if (artikelgruppen == null) {



                                    } else {



                                        if (grgr[2] == datahandler.data[index].subGroups[i].products[ii].pk) {

                                            var lange = datahandler.data[index].subGroups[i].products[ii].articlegroups.length;
                                            for (ind = 0; ind < lange; ind++) {


                                                var artikelgruppename = datahandler.data[index].subGroups[i].products[ii].articlegroups[ind].name;
                                                var artlange = datahandler.data[index].subGroups[i].products[ii].articlegroups[ind].articles.length;


                                                

                                                if (grgr[3] == datahandler.data[index].subGroups[i].products[ii].articlegroups[ind].argr_fk) {


                                                   

                                                    var div = document.createElement('div');
                                                    $('#artgrp').append(div);

                                                    div.innerHTML = '<div style=" background-color: white; border: 2px solid white; margin-left:1cm; margin-right: 2cm; height:45px;" align: center><b><br>' + artikelgruppename + '</b></div>';


                                                    for (inde = 0; inde < artlange; inde++) {

                                                        var abmessung = datahandler.data[index].subGroups[i].products[ii].articlegroups[ind].articles[inde].abmessungen;
                                                        var verpackungshinweis = datahandler.data[index].subGroups[i].products[ii].articlegroups[ind].articles[inde].verpackungshinweis;
                                                        var artikel_nr = datahandler.data[index].subGroups[i].products[ii].articlegroups[ind].articles[inde].artikel_nr;
                                                        var migel1 = datahandler.data[index].subGroups[i].products[ii].articlegroups[ind].articles[inde].migel1;
                                                    
                                                        console.log(abmessung);
                                                        console.log(verpackungshinweis);
                                                        console.log(artikel_nr);
                                                        console.log(migel1);

                                                        var div = document.createElement('div');
                                                        //div.style.styleFloat = "left";
                                                        $('#artgrpart').append(div);
                                                       
                                                        div.innerHTML = '<div style="  margin-left: 0.4cm;"><b>' + verpackungshinweis + '</b></div><div style=" margin-left: 0.4cm;">' + abmessung + '</div><div id="mainselection" style=" width: 600px; margin-left: 0.4cm;"><select id="select" style="background-color: #74cae0; width: 585px; height: 25px; line-height: 1; border: 0; "><option></option value="1"><option>1</option><option value="2">2</option><option value="3">3</option></select><br></div><div style=" margin-left: 0.4cm;"><span>Artikel_Nr.:&nbsp&nbsp&nbsp&nbsp</span>' + artikel_nr + '</div><div style=" margin-left: 0.4cm;">' + migel1 + '</div><hr style="color:grey; noshade width="580" />';
                                                        //<div style=" background-color: white; margin-left: 0.4cm; margin-right: 2cm; width:625px; height:150px;">
                                                     
                                                    } 
                                                
                                                   
                                                }
                                                }

                                        }

                                    }




                                    }
                                }
                            
                        }
                    }
                }

                                                    
            },                                  


         


            loaddata: function () {
                $.ajax({

                    type: 'POST',
                    url: 'https://katalog.ivf.hartmann.info/mobileapi/index.php',
                    data: 'language=DE',
                    dataType: 'json',
                    cache: false,
                    error: function (xhr, ajaxOptions, thrownError) { console.log(xhr.status); console.log(thrownError); console.log(xhr.responseText) },
                    success: function (result) {

                        datahandler.data = result.data;

                    }

                });
            }
        }

        $(document).ready(function () {

            datahandler.loaddata();

        });

        $(document).on('pagebeforeshow', '#produktgruppen', function () {

            datahandler.showProductGroups();

        });


        $(document).on('pagebeforeshow', '#subgruppen', function (event, data) {
            datahandler.showSubgroups(datahandler.nextid);

        });

        $(document).on('pagebeforeshow', '#produkte', function (event, data) {
            datahandler.showProducts(datahandler.nextid);
        });

        $(document).on('pagebeforeshow', '#ifArtikelorArtikelgruppe', function (event, data) {

            datahandler.showifArtikelorArtikelgruppe(datahandler.nextid);

        });

        $(document).on('pagebeforeshow', '#ArtikelgruppenArtikel', function (event, data) {

            datahandler.showArtikelgruppenArtikel(datahandler.nextid);
        });

       

    </script>
</body>
</html>

