
﻿<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Katalog-App</title>


    <link rel="stylesheet" href="css/jquery.mobile-1.0b1.min.css" />
    <link href="css/index.css" rel="stylesheet" media="screen" />

    <script src="scripts/jquery-2.1.1.min.js"></script>
    <script src="scripts/jQueryMobile/jquery.mobile-1.4.5.js"></script>


    <style type="text/css">
    </style>
</head>

<!-- hier wird die checkinternet funktion aufgerufen-->
<body onload="checkInternet();" style="background-image:url(css/start.png); background-repeat: no-repeat;background-attachment:fixed;">


    <script src="cordova.js"></script>
    <script src="scripts/platformOverrides.js"></script>
    <script src="scripts/index.js"></script>

 <!------------------------------- Startseite------------------------------------------------------------->

    <div class="mainContent">

           <div data-role="page" id="startseite">

              <div id="logo">
                    <img id="hartmann" src="css/logo.png" />
              </div>

            <h1 id="uberschrift">
                WIR SIND DIE HELFER<br /><br />
                &nbsp; &nbsp; &nbsp;DER HELFENDEN.
            </h1>

            <div id="icon">
                <a href="#produktgruppen"><img id="klinik" src="css/start_icons/klinik.png" width="88" height="91" style="border-style: none;" /></a>
                <a href="#produktgruppen"><img id="alters" src="css/start_icons/alters.png" width="88" height="91" style="margin-left:130px; margin-right: 130px; border-style: none" /></a>
                <a href="#produktgruppen"><img id="arzt" src="css/start_icons/arzt.png" width="88" height="91" style="border-style: none" /></a>
            </div>

            <img src="css/start_schrift/klinik.png" style="position:absolute; top: 510px; margin-left: 113px" />
            <img src="css/start_schrift/alters.png" style="position:absolute; top: 525px; margin-left: 300px" />
            <img src="css/start_schrift/arzt.png" style="position:absolute; top: 545px; margin-left: 538px" />


            <div id="icon1">
                <a href="#produktgruppen"><img id="apo" src="css/start_icons/apo.png" width="88" height="91" style="border-style: none" /></a>
                <a href="#produktgruppen"><img id="industrie" src="css/start_icons/industrie.png" width="88" height="91" style="margin-left:130px; margin-right: 130px; border-style: none"></a>
                <a href="#produktgruppen"><img id="private" src="css/start_icons/private.png" width="88" height="91" style="border-style: none" /></a>
            </div>


            <img src="css/start_schrift/apo.png" style="position:absolute; bottom: 230px; margin-left: 92px" />
            <img src="css/start_schrift/industrie.png" style="position:absolute; bottom: 230px; margin-left: 305px" />
            <img src="css/start_schrift/private.png" style="position:absolute; bottom: 230px; margin-left: 522px" />


        </div>
<!---------------------------------------------------------------------- Produktgruppen-------------------------------------------------------------->
        <div data-role="page" id="produktgruppen">


            <div id="navigation" style="border: 2px solid #1a4064; ">

                <div class="navii" style="border: 2px solid #1a4064;">
                    <ul>
                        <li id="zurück">
                            <a onclick="history.back()" class="azurück">
                                <img src="css/zurück.png" width="70" height="55" style=" border-style: none" />
                            </a>
                        </li>

                        <li id="produkt" style="margin-left: 8px;">
                            <a href="#">
                                <img src="css/pro_weiss.png" style="margin-right: 50px; border-style: none" />
                            </a>
                            <span style="left: 2px;">Produkte</span>

                        </li>

                        <li id="leistungen">
                            <a href="leistungen.html">
                                <img src="css/leistung.png" width="50" height="50" style="margin-right: 70px; border-style: none" />
                                <span>Leistungen</span>
                            </a>
                        </li>

                        <li id="scan">
                            <a href="scanner.html">
                                <img src="css/scanner.png" width="50" height="50" style="margin-right: 70px; border-style: none " />
                                <span>Scanner</span>
                            </a>
                        </li>
                        <li id="sucheli">
                            <textarea id="ta" placeholder="SUCHE" style="overflow: hidden;"></textarea>
                            </li>
                        
                        <li id="lupe">
                            <img onclick="datahandler.prgrsuchen();" src="css/lupe.png" />

                        </li>
                </ul>
            </div>
            </div>
            <br /><br /><br /><br />
            <br /><br />
            <div id="produktgruppen_inhalt"></div>

        </div>
<!---------------------------------------------------------------------- Subgruppen------------------------------------------------------------->

        <div data-role="page" id="subgruppen">

            <div id="navigation">

                <div class="navii">
                    <ul>
                        <li id="zurück">
                            <a onclick="history.back()" class="azurück">
                                <img src="css/zurück.png" width="80" height="55" style="margin-right:10px; border-style: none" />
                            </a>
                        </li>

                        <li id="produkt">
                            <a href="#">
                                <img src="css/pro_weiss.png" style="margin-right: 75px; border-style: none" />
                                <span>Produkte</span>
                            </a>
                        </li>

                        <li id="leistungen">
                            <a href="leistungen.html">
                                <img src="css/leistung.png" width="50" height="50" style="margin-right: 75px; border-style: none" />
                                <span>Leistungen</span>
                            </a>
                        </li>

                        <li id="scan">
                            <a href="scanner.html">
                                <img src="css/scanner.png" width="50" height="50" style="margin-right: 50px; border-style: none " />
                                <span>Scanner</span>
                            </a>
                        </li>
                        <li>
                            <textarea id="ta" placeholder="SUCHE" style="overflow: hidden; "></textarea>

                        </li>
                    </ul>
                </div>
            </div>


            <br /><br /><br /><br />
            <br /><br />
            <div id="sub"></div>

        </div>
<!---------------------------------------------------------------------- Produkte------------------------------------------------------------->
        <div data-role="page" id="produkte">

            <div id="navigation">

                <div class="navii">
                    <ul>
                        <li id="zurück">
                            <a onclick="history.back()" class="azurück">
                                <img src="css/zurück.png" width="80" height="55" style="margin-right:10px; border-style: none" />
                            </a>
                        </li>

                        <li id="produkt">
                            <a href="#">
                                <img src="css/pro_weiss.png" style="margin-right: 75px; border-style: none" />
                                <span>Produkte</span>
                            </a>
                        </li>

                        <li id="leistungen">
                            <a href="leistungen.html">
                                <img src="css/leistung.png" width="50" height="50" style="margin-right: 75px; border-style: none" />
                                <span>Leistungen</span>
                            </a>
                        </li>

                        <li id="scan">
                            <a href="scanner.html">
                                <img src="css/scanner.png" width="50" height="50" style="margin-right: 50px; border-style: none " />
                                <span>Scanner</span>
                            </a>
                        </li>
                        <li>
                            <textarea id="ta" placeholder="SUCHE" style="overflow: hidden; "></textarea>

                        </li>
                    </ul>

                </div>
            </div>



            <br /><br /><br /><br />
            <br /><br />
            <div id="products"></div>

        </div>

<!---------------------------------------------------------------------- Artikelgruppem------------------------------------------------------------->
        <div data-role="page" id="Artikelgruppen">

            <div id="navigation">

                <div class="navii">
                    <ul>
                        <li id="zurück">
                            <a onclick="history.back()" class="azurück">
                                <img src="css/zurück.png" width="80" height="55" style="margin-right:10px; border-style: none" />
                            </a>
                        </li>

                        <li id="produkt">
                            <a href="#">
                                <img src="css/pro_weiss.png" style="margin-right: 75px; border-style: none" />
                                <span>Produkte</span>
                            </a>
                        </li>

                        <li id="leistungen">
                            <a href="leistungen.html">
                                <img src="css/leistung.png" width="50" height="50" style="margin-right: 75px; border-style: none" />
                                <span style="margin-left: 5px">Leistungen</span>
                            </a>
                        </li>

                        <li id="scan">
                            <a href="scanner.html">
                                <img src="css/scanner.png" width="50" height="50" style="margin-right: 50px; border-style: none " />
                                <span>Scanner</span>
                            </a>
                        </li>
                        <li>
                            <textarea id="ta" placeholder="SUCHE" style="overflow: hidden; "></textarea>

                        </li>
                    </ul>

                </div>
            </div>


            <br /><br /><br /><br />
            <br /><br />
            <div id="artikelgrp"></div>

            <div style="background-color: white; height: 845px; margin-left: 1cm; margin-right: 2cm; overflow:scroll; padding:10px">

                <div id="produktname"></div>

                <hr style="color:grey;" noshade size="1" width="600" align="center" />

                <div id="artikelohneartikelgruppen"></div>

                <div id="buttonmedia" style="background-color:white;"></div>

            </div>

        </div>
<!---------------------------------------------------------------------- Artikel der Artikelgruppen------------------------------------------------------------->
        <div data-role="page" id="ArtikelgruppenArtikel">

            <div id="navigation">

                <div class="navii">
                    <ul>
                        <li id="zurück">
                            <a onclick="history.back()" class="azurück">
                                <img src="css/zurück.png" width="80" height="55" style="margin-right:10px; border-style: none" />
                            </a>
                        </li>

                        <li id="produkt">
                            <a href="#">
                                <img src="css/pro_weiss.png" style="margin-right: 75px; border-style: none" />
                                <span>Produkte</span>
                            </a>
                        </li>

                        <li id="leistungen">
                            <a href="leistungen.html">
                                <img src="css/leistung.png" width="50" height="50" style="margin-right: 75px; border-style: none" />
                                <span style="margin-left: 5px">Leistungen</span>
                            </a>
                        </li>

                        <li id="scan">
                            <a href="scanner.html">
                                <img src="css/scanner.png" width="50" height="50" style="margin-right: 50px; border-style: none " />
                                <span>Scanner</span>
                            </a>
                        </li>
                        <li>
                            <textarea id="ta" placeholder="SUCHE" style="overflow: hidden; "></textarea>

                        </li>
                    </ul>
                </div>
            </div>
            <br /><br /><br /><br />
            <br /><br />
            <div style="background-color: white; height: 800px; margin-left: 1cm; margin-right: 2cm; overflow:scroll; padding:10px">
                <div id="artgrp"></div>
                <hr style="color:grey;" noshade size="1" width="600" align="center" />
                <div id="artgrpart"></div>

                <div id="button" style="background-color: white;"></div>

            </div>
        </div>

<!---------------------------------------------------------------------- Mediacenter (PDF-links)------------------------------------------------------------->
        <div data-role="page" id="Mediacenter">

            <div id="navigation">

                <div class="navii">
                    <ul>
                        <li id="zurück">
                            <a onclick="history.back()" class="azurück">
                                <img src="css/zurück.png" width="80" height="55" style="margin-right:10px; border-style: none" />
                            </a>
                        </li>

                        <li id="produkt">
                            <a href="#">
                                <img src="css/pro_weiss.png" style="margin-right: 75px; border-style: none" />
                                <span>Produkte</span>
                            </a>
                        </li>

                        <li id="leistungen">
                            <a href="leistungen.html">
                                <img src="css/leistung.png" width="50" height="50" style="margin-right: 75px; border-style: none" />
                                <span style="margin-left: 5px">Leistungen</span>
                            </a>
                        </li>

                        <li id="scan">
                            <a href="scanner.html">
                                <img src="css/scanner.png" width="50" height="50" style="margin-right: 50px; border-style: none " />
                                <span>Scanner</span>
                            </a>
                        </li>
                        <li>
                            <textarea id="ta" placeholder="SUCHE" style="overflow: hidden; "></textarea>

                        </li>
                    </ul>
                </div>
            </div>
            <br /><br /><br /><br />
            <br /><br /><br /><br />

            <div style="background-color: white; height: 800px; margin-left: 1cm; margin-right: 2cm; overflow:scroll; padding:10px">

                <br />
                <div style="margin-left: 1cm;">Sap Nr.:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link:</div>
                <hr style="color:grey; margin-right: 0.4cm;" noshade size="1" width="600" align="center" />

                <div id="prgrlinks"></div>
                <div id="sublinks"></div>
                <div id="prolinks"></div>


            </div>

        </div>



<!-------------------------------------------------------------Suchergebnisse ----------------------------------------------------------->

    <div data-role="page" id="Suche">

        <div id="navigation">

            <div class="navii">
                <ul>
                    <li id="zurück">
                        <a onclick="history.back()" class="azurück">
                            <img src="css/zurück.png" width="80" height="55" style="margin-right:10px; border-style: none" />
                        </a>
                    </li>

                    <li id="produkt">
                        <a href="#">
                            <img src="css/pro_weiss.png" style="margin-right: 75px; border-style: none" />
                            <span>Produkte</span>
                        </a>
                    </li>

                    <li id="leistungen">
                        <a href="leistungen.html">
                            <img src="css/leistung.png" width="50" height="50" style="margin-right: 75px; border-style: none" />
                            <span style="margin-left: 5px">Leistungen</span>
                        </a>
                    </li>

                    <li id="scan">
                        <a href="scanner.html">
                            <img src="css/scanner.png" width="50" height="50" style="margin-right: 50px; border-style: none " />
                            <span>Scanner</span>
                        </a>
                    </li>
                    <li>
                        <textarea id="ta" placeholder="SUCHE" style="overflow: hidden; "></textarea>

                    </li>
                </ul>
            </div>
        </div>
        <br /><br /><br /><br />
        <br /><br /><br /><br />

        <div id="zahler" style="margin-left: 1cm;"></div>

        <div style="background-color: white; height: 800px; margin-left: 1cm; margin-right: 2cm; overflow:scroll; padding:10px">

            <div id="prgr"></div>
           
            <div id="artgr"></div>

               

        </div>

    </div>


</div>

 <script>
 //-----------------------------------------------Prdouktgruppen werden angezeigt---------------------------------------------------------------------------------------------------------------


            datahandler =

                {
                    data: null,
                    nextid: 0,


                    showProductGroups: function () { //Produktgruppen
                        $('#produktgruppen_inhalt').html('');

                        for (index = 0; index < datahandler.data.length; index++) {

                            var div = document.createElement('div');
                            var pgname = datahandler.data[index].name;

                            div.style.styleFloat = "left";
                            //div.innerHTML = '<div style="float: left; border: 0px; "><b>' + datahandler.data[index].name + '</div><div style="clear: both"><img src="css/Probild.png"></div><div>&nbsp;</div>';
                            div.innerHTML = '<div style="float: left; "><b>' + pgname + '</div><div style="clear: both"><img src="css/Probild.png">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>';

                            var gr_fk = datahandler.data[index].gr_fk;

                            $('#produktgruppen_inhalt').append(div);

                            console.log(datahandler.data);

                            var makeShowItemEventListener = function (element) {
                                return function () {
                                    datahandler.nextid = element;
                                    $.mobile.pageContainer.pagecontainer("change", "#subgruppen", { test: "Hello World!" });
                                };
                            }
                            div.onclick = makeShowItemEventListener(gr_fk);
                        }
                    },
                    //----------------------------------------------Subgruppen werden angezeigt----------------------------------------------------------------------------------------------------------------
                    showSubgroups: function (prgr_fk) { //SubGruppen



                        for (index = 0; index < datahandler.data.length; index++) {

                            if (datahandler.data[index].gr_fk == prgr_fk) {

                                var lange = datahandler.data[index].subGroups.length
                                $('#sub').html('');
                                for (var i = 0; i < lange; i++) {

                                    var subgruppen = datahandler.data[index].subGroups[i].name;
                                    var sg_fk = datahandler.data[index].subGroups[i].sg_fk;
                                    var gr = datahandler.data[index].gr_fk;
                                    var div = document.createElement('div');
                                    //div.innerHTML = '<div  style="float: left; border: 0px;"><b>' + subgruppen + '</b></div><div style="clear: both"><img src="css/Probild.png"><div><div></div>';

                                    div.style.styleFloat = "left";
                                    div.innerHTML = '<div style="float: left;"><b>' + subgruppen + '</div><div style="clear: both"><img src="css/Probild.png">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>';

                                    $('#sub').append(div);


                                    var makeShowItemEventListener = function (element, sg_fk) {


                                        return function () {
                                            var tmp = [element, sg_fk];
                                            datahandler.nextid = tmp;
                                            $.mobile.pageContainer.pagecontainer("change", "#produkte", { test: "Hello World!" });
                                        };
                                    }
                                    div.onclick = makeShowItemEventListener(gr, sg_fk);
                                }
                            }
                        }

                    },
                    //---------------------------------------------------Produkte werden angezeigt-----------------------------------------------------------------------------------------------------------
                    showProducts: function (grgr) { //Produkte


                        for (index = 0; index < datahandler.data.length; index++) {


                            if (datahandler.data[index].gr_fk == grgr[0]) {
                                $('#products').html('');
                                var lange = datahandler.data[index].subGroups.length
                                //console.log(lange);
                                for (var i = 0; i < lange; i++) {

                                    var subgruppen = datahandler.data[index].subGroups[i].name;
                                    var produkte = datahandler.data[index].subGroups[i].products;
                                    var prolange = datahandler.data[index].subGroups[i].products.length;
                                    var sg_fk = datahandler.data[index].subGroups[i].sg_fk;
                                    var gr = datahandler.data[index].gr_fk;

                                    if (datahandler.data[index].subGroups[i].sg_fk == grgr[1]) {

                                        for (var ii = 0; ii < prolange; ii++) {

                                            var produktename = datahandler.data[index].subGroups[i].products[ii].name;
                                            var div = document.createElement('div');
                                            // div.innerHTML = '<div  style="float: left; border: 0px; "><b>' + produktename + '</b></div><div style="clear: both"><img src="css/Probild.png"><div><div></div>';

                                            div.style.styleFloat = "left";
                                            div.innerHTML = '<div style="float: left; "><b>' + produktename + '</div><div style="clear: both"><img src="css/Probild.png">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>';

                                            $('#products').append(div);

                                            var sg_fk = datahandler.data[index].subGroups[i].sg_fk;
                                            var gr = datahandler.data[index].gr_fk;
                                            var pk = datahandler.data[index].subGroups[i].products[ii].pk;

                                            var makeShowItemEventListener = function (element, sg_fk, pk) {
                                                return function () {
                                                    var tmp = [element, sg_fk, pk];
                                                    datahandler.nextid = tmp;
                                                    $.mobile.pageContainer.pagecontainer("change", "#Artikelgruppen", { test: "Hello World!" });
                                                };
                                            }
                                            div.onclick = makeShowItemEventListener(gr, sg_fk, pk);
                                        }
                                    }
                                }
                            }
                        }
                    },
                    //---------------------------------------------es wird geprüft ob Artikelgruppen bestehen-----------------------------------------------------------------------------------------------------------------
                    showArtikelgruppen: function (grgr) {
                        for (index = 0; index < datahandler.data.length; index++) {

                            if (datahandler.data[index].gr_fk == grgr[0]) {

                                $('#artikelgrp').html(''); // nach dem ausgeben immer leeren sonst wird es doppelt ausgegeben
                                $('#produktname').html('');
                                $('#artikelohneartikelgruppen').html('');
                                $('#buttonmedia').html('');

                                var sublange = datahandler.data[index].subGroups.length

                                for (var i = 0; i < sublange; i++) {

                                    if (datahandler.data[index].subGroups[i].sg_fk == grgr[1]) {

                                        var prolange = datahandler.data[index].subGroups[i].products.length;

                                        for (var ii = 0; ii < prolange; ii++) {

                                            if (grgr[2] == datahandler.data[index].subGroups[i].products[ii].pk) {

                                                var produktname = datahandler.data[index].subGroups[i].products[ii].name;
                                                var artikelgruppen = datahandler.data[index].subGroups[i].products[ii].articlegroups;

                                            }
                                            if (artikelgruppen == null) {

                                                if (grgr[2] == datahandler.data[index].subGroups[i].products[ii].pk) {

                                                    var artikellange = datahandler.data[index].subGroups[i].products[ii].articles.length;
                                                    var divname = document.createElement('div');

                                                    $('#produktname').append(divname);
                                                    divname.innerHTML = '<div style=" background-color: white; border: 2px solid white; margin-left:1cm; margin-right: 2cm; height:45px;" align: center><b><br>' + produktname + '</b></div>';

                                                    for (ind = 0; ind < artikellange; ind++) {

                                                        var artikel_nr = datahandler.data[index].subGroups[i].products[ii].articles[ind].artikel_nr;
                                                        var abmessung = datahandler.data[index].subGroups[i].products[ii].articles[ind].abmessung;
                                                        var migel1 = datahandler.data[index].subGroups[i].products[ii].articles[ind].migel1;
                                                        var verpackungshinweis = datahandler.data[index].subGroups[i].products[ii].articles[ind].verpackungshinweis;

                                                        console.log(artikel_nr);

                                                        var div = document.createElement('div');
                                                        div.style.styleFloat = "left";
                                                        div.innerHTML = '<div style="  margin-left: 0.4cm;"><b>' + verpackungshinweis + '</b></div><div style=" margin-left: 0.4cm;">' + abmessung + '</div><div id="mainselection" style=" width: 600px; margin-left: 0.4cm;"><br></div><div style=" margin-left: 0.4cm;"><span>Artikel_Nr.:&nbsp&nbsp&nbsp&nbsp</span>' + artikel_nr + '</div><div style=" margin-left: 0.4cm;">' + migel1 + '</div><hr style="color:grey; noshade width="580" />';

                                                        $('#artikelohneartikelgruppen').append(div);

                                                    }
                                                    var divaa = document.createElement('div');
                                                    var mediacenter = 'Mediacenter';

                                                    divaa.innerHTML = '<div id="footer" style="background-color:#eaf4f5; left: 46px; width: 655px; height: 65px; position: fixed; top: 920px; "><br>&nbsp;&nbsp;&nbsp;<button name="button" style="background-color:#83d0e3; width:100px; height:25px; " value="Mediacenter" type="button"><span id="buttonschrift">' + mediacenter + '</span></button></div>';

                                                    $('#buttonmedia').append(divaa);

                                                    var makeShowItemEventListener = function (element, sg_fk, pk) {
                                                        return function () {
                                                            var tmp = [element, sg_fk, pk];
                                                            datahandler.nextid = tmp;
                                                            $.mobile.pageContainer.pagecontainer("change", "#Mediacenter", { test: "Hello World!" });
                                                        };
                                                    }
                                                    divaa.onclick = makeShowItemEventListener(gr, sg_fk, pk);
                                                }
                                            } else { // die Artikeln mt Artikelgruppen


                                                for (var ii = 0; ii < prolange; ii++) {

                                                    if (grgr[2] == datahandler.data[index].subGroups[i].products[ii].pk) {

                                                        var produktname = datahandler.data[index].subGroups[i].products[ii].name;
                                                        var artikelgruppen = datahandler.data[index].subGroups[i].products[ii].articlegroups;

                                                        var lange = datahandler.data[index].subGroups[i].products[ii].articlegroups.length;

                                                        if (grgr[2] == datahandler.data[index].subGroups[i].products[ii].pk) {

                                                            for (ind = 0; ind < lange; ind++) {

                                                                var artikelgruppe = datahandler.data[index].subGroups[i].products[ii].articlegroups[ind].name;
                                                                console.log(artikelgruppe);
                                                                var div = document.createElement('div');

                                                                div.style.styleFloat = "left";
                                                                div.innerHTML = '<div style="float: left; "><b>' + artikelgruppe + '</div><div style="clear: both"><img src="css/Probild.png">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>';
                                                                $('#artikelgrp').append(div);

                                                                var argr_fk = datahandler.data[index].subGroups[i].products[ii].articlegroups[ind].argr_fk;
                                                                var sg_fk = datahandler.data[index].subGroups[i].sg_fk;
                                                                var gr = datahandler.data[index].gr_fk;
                                                                var pk = datahandler.data[index].subGroups[i].products[ii].pk;

                                                                var makeShowItemEventListener = function (element, sg_fk, pk, argr_fk) {
                                                                    return function () {
                                                                        var tmp = [element, sg_fk, pk, argr_fk];
                                                                        datahandler.nextid = tmp;
                                                                        $.mobile.pageContainer.pagecontainer("change", "#ArtikelgruppenArtikel", { test: "Hello World!" });
                                                                    };
                                                                }
                                                                div.onclick = makeShowItemEventListener(gr, sg_fk, pk, argr_fk);
                                                            }
                                                        }
                                                    }
                                                }

                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    //-------------------------------------------------------------Artikeln der Artikelgruppen werden angezeigt-------------------------------------------------------------------------------------------------
                    showArtikelgruppenArtikel: function (grgr) {

                        console.log('test');




                        for (index = 0; index < datahandler.data.length; index++) {

                            if (datahandler.data[index].gr_fk == grgr[0]) {

                                $('#artgrpart').html('');
                                $('#artgrp').html('');
                                $('#button').html('');

                                var sublange = datahandler.data[index].subGroups.length

                                for (var i = 0; i < sublange; i++) {

                                    if (datahandler.data[index].subGroups[i].sg_fk == grgr[1]) {

                                        var prolange = datahandler.data[index].subGroups[i].products.length;

                                        for (var ii = 0; ii < prolange; ii++) {

                                            if (grgr[2] == datahandler.data[index].subGroups[i].products[ii].pk) {

                                                var produktname = datahandler.data[index].subGroups[i].products[ii].name;
                                                var artikelgruppen = datahandler.data[index].subGroups[i].products[ii].articlegroups;
                                            }

                                            if (artikelgruppen == null) {

                                            } else {

                                                if (grgr[2] == datahandler.data[index].subGroups[i].products[ii].pk) {
                                                    var lange = datahandler.data[index].subGroups[i].products[ii].articlegroups.length;

                                                    for (ind = 0; ind < lange; ind++) {

                                                        var artikelgruppename = datahandler.data[index].subGroups[i].products[ii].articlegroups[ind].name;
                                                        var artlange = datahandler.data[index].subGroups[i].products[ii].articlegroups[ind].articles.length;

                                                        if (grgr[3] == datahandler.data[index].subGroups[i].products[ii].articlegroups[ind].argr_fk) {

                                                            var div = document.createElement('div');

                                                            $('#artgrp').append(div);

                                                            div.innerHTML = '<div style=" background-color: white; border: 2px solid white; margin-left:1cm; margin-right: 2cm; height:45px;" align: center><b><br>' + artikelgruppename + '</b></div>';

                                                            for (inde = 0; inde < artlange; inde++) {

                                                                var abmessung = datahandler.data[index].subGroups[i].products[ii].articlegroups[ind].articles[inde].abmessungen;
                                                                var verpackungshinweis = datahandler.data[index].subGroups[i].products[ii].articlegroups[ind].articles[inde].verpackungshinweis;
                                                                var artikel_nr = datahandler.data[index].subGroups[i].products[ii].articlegroups[ind].articles[inde].artikel_nr;
                                                                var migel1 = datahandler.data[index].subGroups[i].products[ii].articlegroups[ind].articles[inde].migel1;

                                                                console.log(abmessung);
                                                                console.log(verpackungshinweis);
                                                                console.log(artikel_nr);
                                                                console.log(migel1);

                                                                var argr_fk = datahandler.data[index].subGroups[i].products[ii].articlegroups[ind].argr_fk;
                                                                var sg_fk = datahandler.data[index].subGroups[i].sg_fk;
                                                                var gr = datahandler.data[index].gr_fk;
                                                                var pk = datahandler.data[index].subGroups[i].products[ii].pk;
                                                                var divb = document.createElement('div');

                                                                //div.style.styleFloat = "left";

                                                                $('#artgrpart').append(divb);
                                                                divb.innerHTML = '<div style="  margin-left: 0.4cm;"><b>' + verpackungshinweis + '</b></div><div style=" margin-left: 0.4cm;">' + abmessung + '</div><div id="mainselection" style=" width: 600px; margin-left: 0.4cm;"><select id="select" style="background-color: #74cae0; width: 585px; height: 30px; line-height: 1; border: 0; "><option></option value="1"><option>1</option><option value="2">2</option><option value="3">3</option></select><br></div><div style=" margin-left: 0.4cm;"><span>Artikel_Nr.:&nbsp&nbsp&nbsp&nbsp</span>' + artikel_nr + '</div><div style=" margin-left: 0.4cm;">' + migel1 + '</div><hr style="color:grey; noshade width="580" />';
                                                                //<div style=" background-color: white; margin-left: 0.4cm; margin-right: 2cm; width:625px; height:150px;">
                                                            }
                                                            var divaa = document.createElement('div');
                                                            var mediacenter = 'Mediacenter';

                                                            divaa.innerHTML = '<div id="footer" style="background-color:#eaf4f5; left: 46px; width: 655px; height: 65px; position: fixed; top: 920px; "><br>&nbsp;&nbsp;&nbsp;<button name="button" style="background-color:#83d0e3; width:100px; height:25px; " value="Mediacenter" type="button"><span id="buttonschrift">' + mediacenter + '</span></button></div>';

                                                            $('#button').append(divaa);

                                                            var makeShowItemEventListener = function (element, sg_fk, pk, argr_fk) {

                                                                return function () {


                                                                    var tmp = [element, sg_fk, pk, argr_fk];
                                                                    datahandler.nextid = tmp;
                                                                    $.mobile.pageContainer.pagecontainer("change", "#Mediacenter", { test: "Hello World!" });
                                                                };
                                                            }
                                                            divaa.onclick = makeShowItemEventListener(gr, sg_fk, pk, argr_fk);
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    //---------------------------------------------------------pdf links werden angezeigt-----------------------------------------------------------------------------------------------------
                    showMediacenter: function (grgr) {

                        console.log('test1');

                        for (index = 0; index < datahandler.data.length; index++) {

                            if (datahandler.data[index].gr_fk == grgr[0]) {

                                $('#prgrlinks').html('');
                                $('#sublinks').html('');
                                $('#prolinks').html('');


                                var lange = datahandler.data[index].subGroups.length
                                var prgrlinklange = datahandler.data[index].links.length;
                                var prgrname = datahandler.data[index].name;


                                console.log('Links der Produktgruppe' + prgrname);
                                console.log(prgrlinklange)

                                // produktgruppenlinks werden ausgegeben
                                for (pi = 0; pi < prgrlinklange; pi++) {

                                    var prgrlink = datahandler.data[index].links[pi].link;
                                    var prgrsap = datahandler.data[index].links[pi].sap_nr;
                                    var prgrurl = datahandler.data[index].links[pi].url;


                                    console.log(prgrlink);
                                    console.log(prgrurl);

                                    var div = document.createElement('div');
                                    div.innerHTML = '<div style="height:22px; width: 600px;"><span style="color: #1a4064;">' + prgrsap + '</span><div style="width: 500px; float: right; "><a style="color:#74cae0;" href="' + prgrurl + '">' + prgrlink + '</a></div><hr style="color:grey;" noshade size="0.3" width="600" align="center" />';
                                    $('#prgrlinks').append(div);
                                }

                                for (i = 0; i < lange; i++) {

                                    if (datahandler.data[index].subGroups[i].sg_fk == grgr[1]) {

                                        var prolange = datahandler.data[index].subGroups[i].products.length;
                                        var sublinklange = datahandler.data[index].subGroups[i].links.length;
                                        var subname = datahandler.data[index].subGroups[i].name;

                                        console.log('Links der Subgruppe' + subname);
                                        console.log(sublinklange);
                                        // subgruppen links werden ausgegeben

                                        for (si = 0; si < sublinklange; si++) {

                                            var sublinks = datahandler.data[index].subGroups[i].links[si].link;
                                            var subsap = datahandler.data[index].subGroups[i].links[si].sap_nr;
                                            var suburl = datahandler.data[index].subGroups[i].links[si].url;

                                            console.log(sublinks);
                                            console.log(suburl);

                                            var div = document.createElement('div');
                                            div.innerHTML = '<div style="height:22px; width: 600px;"><span style="color: #1a4064;">' + subsap + '</span><div style="width: 500px; float: right; "><a style="color:#74cae0;" href="' + suburl + '">' + sublinks + '</a></div><hr style="color:grey;" noshade size="0.3" width="600" align="center" />';
                                            $('#sublinks').append(div);
                                        }

                                        for (ii = 0; ii < prolange; ii++) {

                                            if (datahandler.data[index].subGroups[i].products[ii].pk == grgr[2]) {

                                                var prolinklange = datahandler.data[index].subGroups[i].products[ii].links.length;
                                                var proname = datahandler.data[index].subGroups[i].products[ii].name;

                                                console.log('Links der Produkte' + proname);
                                                console.log(prolinklange);

                                                // produkte links werden ausgegeben
                                                for (pri = 0; pri < prolinklange; pri++) {

                                                    var prolinks = datahandler.data[index].subGroups[i].products[ii].links[pri].link;
                                                    var prosap = datahandler.data[index].subGroups[i].products[ii].links[pri].sap_nr;
                                                    var prourl = datahandler.data[index].subGroups[i].products[ii].links[pri].url;


                                                    console.log(prolinks);


                                                    var div = document.createElement('div');
                                                    div.innerHTML = '<div style="height:22px; width: 600px;"><span style="color: #1a4064;">' + prosap + '</span><div style="width: 500px; float: right; "><a style="color:#74cae0;" href="' + prourl + '">' + prolinks + '</a></div><hr style="color:grey;" noshade size="0.3" width="600" align="center" />';
                                                    $('#prolinks').append(div);
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },

                    //----------------------------------------------------------lokale daten werden ausgegeben--------------------------------------------------------------------------------------------------------------
                    localStorage_ausgeben: function () {

                        console.log('ich bin im localStorage');

                        var alleDaten = JSON.parse(localStorage.getItem('feld'));

                        datahandler.data = alleDaten;

                        console.log(datahandler.data);

                        /*  for (var i = 0; i < localStorage.length; i++) {

                              var name = alleDaten[i].name;
                              var prgr_fk = alleDaten[i].prgr_fk;

                              console.log(name, prgr_fk);

                          }*/
                    },

                    //--------------------------------------------------Webservice wird aufgerufen und daten werden lokal abgespeichert------------------------------------------------------------------------------------------------------------

                    loaddata: function () {
                        console.log('mit dem Webservice verbunden');

                        $.ajax({
                            type: 'POST',
                            url: 'https://katalog.ivf.hartmann.info/mobileapi/index.php',
                            data: 'language=DE',
                            dataType: 'json',
                            cache: false,
                            error: function (xhr, ajaxOptions, thrownError) { console.log(xhr.status); console.log(thrownError); console.log(xhr.responseText) },
                            success: function (result) {
                                datahandler.data = result.data;

                                // Daten als feld in localStorage speichern!
                                var feld = [];
                                localStorage["feld"] = JSON.stringify(datahandler.data);
                                var alleDaten = JSON.parse(localStorage["feld"]);

                                //console.log(alleDaten);

                            }
                        });
                    },

                    //-------------------------------------------------------Suchfunktion-----------------------------------------------------------------------------------------------------------
                    prgrsuchen: function () {
                        
                        var zahler = 0;


                        console.log('ich suche im LocalStorage');
                        var alleDaten = JSON.parse(localStorage.getItem('feld')); //die Daten aus dem localStorage werden mit get ausgelesen
                        datahandler.data = alleDaten; //alleDaten aus dem lokalStorage werden in datahandler.data geschrieben
                        var suchbegriff = document.getElementById('ta').value; //Begriff wird aus Textfeld ausgeles
                       
                        var Suche = new RegExp(suchbegriff, "gi");
                        //console.log(Suche);
                       
                        $.mobile.pageContainer.pagecontainer("change", "#Suche", { test: "Hello World!" });

                        if (suchbegriff == '') {

                            console.log('sie müssen iwas eingeben');

                        } else {

                         
                            var diva = document.createElement('div');
                            diva.innerHTML = '<span style="color: #1a4064;">Produktgruppen</span>';
                            $('#prgr').append(diva);

                            //Produktgruppe durchsuchen 
                            for (var index = 0; index < datahandler.data.length; index++) {

                              
                                var sublange = datahandler.data[index].subGroups.length;
                                var prgrname = datahandler.data[index].name;

                                if (prgrname.search(Suche) >= 0) {

                                    console.log(prgrname);
                                    zahler++;
                                    var div = document.createElement('div');
                                    div.innerHTML = '<div><span style="color:#74cae0;">' + prgrname + '</span></div>';
                                    $('#prgr').append(div);

                                } else {

                                    console.log('kein Treffer');

                                }
                            }
                            var x = zahler;
                            console.log(x);
                            datahandler.subsuchen(Suche, x);

                           



                        }

                    },

 //-----------------------------------------subgruppen druchsuchen------------------------------------------------------------------------

                    subsuchen: function (Suche, x) {
                        
                        console.log('subsuche');
                        //console.log(suchbegriff);
                        
                        var zahler = x;
                        console.log(zahler);

                        var div = document.createElement('div');
                        div.innerHTML = '<span style="color: #1a4064;">Subgruppen</span>';
                        $('#prgr').append(div);

                        for (var index = 0; index < datahandler.data.length; index++) {
                            var sublange = datahandler.data[index].subGroups.length;

                            for (var i = 0; i < sublange; i++) {

                                var subname = datahandler.data[index].subGroups[i].name;

                                if (subname.search(Suche) >= 0) {


                                    console.log(subname);
                                    zahler++;
                                    var diva = document.createElement('div');
                                    diva.innerHTML = '<div><span style="color:#74cae0;">' + subname + '</span></div>';
                                    $('#prgr').append(diva);


                                } else {

                                    console.log('kein Treffer');
                                }
                            }
                        }
                        var x = zahler;
                        console.log(x);
                        datahandler.prosuchen(Suche,x);

                    },

//-----------------------------------------produkte druchsuchen----------------------------------------------------------------------------


                    prosuchen: function (Suche, x) {
                       
                        var zahler = x;
                        console.log(zahler);

                        console.log('prosuche');
                        //console.log(suchbegriff);


                        var diva = document.createElement('div');
                        diva.innerHTML = '<span style="color: #1a4064;">Produkte</span>';
                        $('#prgr').append(diva);

                        for (var index = 0; index < datahandler.data.length; index++) {
                            var sublange = datahandler.data[index].subGroups.length;

                            for (var i = 0; i < sublange; i++) {

                                var subname = datahandler.data[index].subGroups[i].name;
                                var prolange = datahandler.data[index].subGroups[i].products.length;

                                for (var ii = 0; ii < prolange; ii++) {

                                    var pkname = datahandler.data[index].subGroups[i].products[ii].name;
                                    var artgr = datahandler.data[index].subGroups[i].products[ii].articlegroups;

                                    if (pkname.search(Suche) >= 0) {

                                        console.log(pkname);
                                       
                                        zahler++;
                                        var divaa = document.createElement('div');
                                        divaa.innerHTML = '<div>' + pkname + '</div>';
                                        $('#prgr').append(divaa);

                                    } else {

                                        console.log('kein Treffer');
                                    }

                                }
                                //art gruppe

                                for (var index = 0; index < datahandler.data.length; index++) {
                                    var sublange = datahandler.data[index].subGroups.length;

                                    for (var i = 0; i < sublange; i++) {

                                        var subname = datahandler.data[index].subGroups[i].name;
                                        var prolange = datahandler.data[index].subGroups[i].products.length;

                                        for (var ii = 0; ii < prolange; ii++) {

                                            var pkname = datahandler.data[index].subGroups[i].products[ii].name;
                                            var artgr = datahandler.data[index].subGroups[i].products[ii].articlegroups;

                                            if (pkname.search(Suche) >= 0) {
                                                console.log(pkname);

                                            } else {

                                                console.log('kein Treffer');
                                            }


                                            if (artgr == null) {


                                                console.log('keine artgr');

                                            } else {


                                                var x = zahler;
                                                console.log(x);
                                                datahandler.artgrsuchen(Suche,x);

                                            }
                                        }

                                    }
                                }
                            }

                        }
                    

                    },


                    //----------------------------------------------------Artikelgruppen durchsuchen--------------------------------------------------------------------------------

                    artgrsuchen: function (Suche, x) {
                       

                        var zahler =x;
                        console.log('Artikelgruppen_suche');

                        $('#artgr').html('');
                       

                        var diva = document.createElement('div');
                        diva.innerHTML = '<span style="color: #1a4064;">Artikelgruppen</span>';
                        $('#artgr').append(diva);

                        for (var index = 0; index < datahandler.data.length; index++) {

                            var sublange = datahandler.data[index].subGroups.length

                            for (var i = 0; i < sublange; i++) {

                                var prolange = datahandler.data[index].subGroups[i].products.length;


                                for (var ii = 0; ii < prolange; ii++) {
                    
                                    var artgr = datahandler.data[index].subGroups[i].products[ii].articlegroups;
                                   

                                    if (artgr != null) {

                                        var artgrlange = datahandler.data[index].subGroups[i].products[ii].articlegroups.length;

                                        for (var ind = 0; ind < artgrlange; ind++) {

                                            var artgrname = datahandler.data[index].subGroups[i].products[ii].articlegroups[ind].name;
                                           
                                                if(artgrname != null){
                                                    
                                                    if (artgrname.search(Suche) >= 0) {
                                                        
                                                        console.log(artgrname);

                                                        zahler++;

                                                        var divaa = document.createElement('div');
                                                        divaa.innerHTML = '<div><span style="color:#74cae0;">' + artgrname + '</span></div>';
                                                        $('#artgr').append(divaa);

                                                     
                                                        
                                                    } else {
                                                        console.log('kein Treffer');
                                                    }

                                                }else{

                                                console.log('name null');
                                            }
                                        }

                                    }else{


                                        console.log('keine artikelgruppe');

                                    }


                                }
                               
                            }}

                        $('#zahler').html('');
                        var x = zahler;

                        var div = document.createElement('div');
                        div.innerHTML = '<div><span style="color: #1a4064;"><b>Es wurden ' + x + ' Ergebnisse gefunden!</b></span></div>';
                        $('#zahler').append(div);


                    },
                    
               
                }
               


                       

                         
//--------------------------------------------Internetverbidnung wird geprüft-----------------------------------------------------------------------------------------------------------------


            function checkInternet() {

                var inet = navigator.onLine;
                console.log(inet);

                if (inet == false) {

                    console.log('offline');
                    $(document).ready(function () {

                        datahandler.localStorage_ausgeben();

                    });

                } else {

                    console.log('online');
                    $(document).ready(function () {
                        datahandler.loaddata();


                    });

                }

            }

            //-----------------------------------------page Aufruf----------------------------------------------------------------------------------------------------------------------------



            $(document).on('pagebeforeshow', '#produktgruppen', function () {
                datahandler.showProductGroups();
            });
            $(document).on('pagebeforeshow', '#subgruppen', function (event, data) {

                datahandler.showSubgroups(datahandler.nextid);
            });
            $(document).on('pagebeforeshow', '#produkte', function (event, data) {
                datahandler.showProducts(datahandler.nextid);
            });
            $(document).on('pagebeforeshow', '#Artikelgruppen', function (event, data) {
                datahandler.showArtikelgruppen(datahandler.nextid);
            });
            $(document).on('pagebeforeshow', '#ArtikelgruppenArtikel', function (event, data) {
                datahandler.showArtikelgruppenArtikel(datahandler.nextid);
            });
            $(document).on('pagebeforeshow', '#ArtikelohneArtikelgruppen', function (event, data) {
                datahandler.showArtikelgruppen(datahandler.nextid);
            });
            $(document).on('pagebeforeshow', '#Mediacenter', function (event, data) {
                datahandler.showMediacenter(datahandler.nextid);
            });

           


        </script>
</body>
</html>

